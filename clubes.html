<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Clubes - Liga Pesqueira Pro</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="menu"></div>

  <main class="container">
    <h1>Clubes Participantes</h1>
    <div id="clubes-container" class="grid"></div>
  </main>

  <script>
    // Carrega o menu
    fetch("header.html")
      .then(res => res.text())
      .then(data => {
        document.getElementById("menu").innerHTML = data;
      });

    // Carrega dados da API do Cartola
    const apiUrl = 'https://cartola-api-oficial.vercel.app/api/times';

    fetch(apiUrl)
      .then(res => res.json())
      .then(times => {
        const container = document.getElementById('clubes-container');
        times.forEach(time => {
          const escudo = time.escudo_url_svg || time.escudo_url;
          const escudoUrl = escudo
            ? `https://cartola-api-oficial.vercel.app/api/escudo?url=${encodeURIComponent(escudo)}`
            : 'https://placehold.co/80x80?text=Escudo';

          const card = document.createElement('div');
          card.className = 'card';
          card.innerHTML = `
            <img src="${escudoUrl}" alt="Escudo de ${time.nome}" onerror="this.onerror=null; this.src='https://placehold.co/80x80?text=Escudo'">
            <h3>${time.nome}</h3>
            <p><strong>Cartoleiro:</strong> ${time.nome_cartola}</p>
            <p><strong>Pontos:</strong> ${time.pontos}</p>
            <p><strong>Patrim√¥nio:</strong> C$ ${time.patrimonio.toFixed(2)}</p>
          `;
          container.appendChild(card);
        });
      })
      .catch(error => console.error('Erro ao carregar times:', error));
  </script>
</body>
</html>
